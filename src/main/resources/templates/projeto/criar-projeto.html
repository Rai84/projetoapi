<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Criar Projeto</title>
</head>
<body>
    <h2>Criar Novo Projeto</h2>
    <form id="formProjeto" action="/api/projetos" method="post">
        <label for="nome">Nome:</label>
        <input type="text" id="nome" name="nome" required><br>
        
        <label for="descricao">descricao:</label>
        <input type="text" id="descricao" name="descricao" required><br>
        
        <button type="submit">Salvar</button>
    </form>

    <script>
      document.getElementById('formProjeto').addEventListener('submit', async function(event) {
        event.preventDefault(); // impede o envio padrão do form
        
        const nome = document.getElementById('nome').value;
        const descricao = document.getElementById('descricao').value;

        const projeto = { nome, descricao };

        try {
          const response = await fetch('/api/projetos', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify(projeto)
          });

          if (response.ok) {
            alert('Projeto criado com sucesso!');
            // Redirecionar para a listagem ou limpar o form
            window.location.href = '/projetos/listar'; 
          } else {
            alert('Erro ao criar projeto: ' + response.statusText);
          }
        } catch (error) {
          alert('Erro na requisição: ' + error.message);
        }
      });
    </script>
</body>
</html>
